# 服务器状态监控工具
## 工具介绍
本工具用于实时监控《王权与自由（Throne and Liberty）》Sunstorm服务器的状态，当服务器状态发生变更时，通过企业微信机器人自动推送告警通知。支持日志记录、配置灵活调整、通知功能测试等特性。

## 环境依赖
- Python 3.6+
- 依赖库：`requests`、`beautifulsoup4`、`lxml`

安装依赖命令：
```bash
pip install requests beautifulsoup4 lxml
企业微信 Webhook 获取方式
进入企业微信群聊 → 群设置 → 群机器人 → 添加机器人；
复制机器人的 Webhook 地址，粘贴到WECHAT_WEBHOOK_URL字段。
使用方法
安装依赖库（见「环境依赖」）；
配置企业微信 Webhook 地址（必填）；
运行代码：
bash
运行
python server_monitor.py
程序启动时会提示「是否测试企业微信通知」，输入y可发送测试消息，验证通知功能是否正常；
程序将持续运行，按配置间隔检查服务器状态，状态变更时自动推送告警。
功能说明
日志记录
控制台实时输出监控日志；
日志文件（server_monitor.log）记录所有操作，文件大小超过 10MB 时自动轮转，保留最近 3 个备份。
状态监控
循环检查服务器状态，记录「检查时间 + 当前状态」；
仅当状态发生变化时推送企业微信告警，避免重复通知。
异常处理
网络请求失败、页面元素找不到时，日志会记录错误信息，程序不中断；
按Ctrl+C可手动终止程序，日志会记录「监控程序被手动停止」。
常见问题
提示「未找到目标元素」
原因：页面结构变更或 XPath 表达式错误；
解决：重新检查页面元素，更新XPATH配置。
企业微信通知发送失败
检查 Webhook 地址是否正确；
确认企业微信机器人未被删除；
检查网络是否能访问企业微信服务器。
程序运行卡顿 / 无响应
调整CHECK_INTERVAL增大检查间隔（如改为 10 秒）；
检查目标 URL 是否能正常访问。
注意事项
请勿将检查间隔设置过短（如 1 秒），避免频繁请求导致 IP 被目标网站封禁；
若目标网站页面结构变更，需同步更新XPath表达式；
日志文件会持续占用磁盘空间，建议定期清理旧日志。
